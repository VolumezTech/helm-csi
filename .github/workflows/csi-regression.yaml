name: Trigger CSI Regression Tests

on: 
  pull_request:
    types: [opened, reopened, synchronize]
    branches:
      - main
      - development
  
jobs:
  trigger_jenkins_job1:
    name: Trigger Jenkins Job - Config 1
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Jenkins Job
        uses: appleboy/jenkins-action@v2
        with:
          url: ${{ secrets.JENKINS_URL }}
          username: ${{ secrets.JENKINS_USERNAME }}
          token: ${{ secrets.JENKINS_TOKEN }}
          job: "Regression_V3"
          parameters: |
              Test_Plan=QA-5282
              Private_SB=github.ref_name
              AWS_EC2_OS=eks_latest
              AWS_APP_OS=eks_latest
              Config_File=eks_fast_regression_default.json
              Manifest_Branch=master
              pipeline_automation_branch=master
              is_ms_mode=True
              AWS_EC2_VNL=True
              AWS_APP_VNL=True

  trigger_jenkins_job2:
    name: Trigger Jenkins Job - Config 2
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Jenkins Job
        uses: appleboy/jenkins-action@v2
        with:
          url: ${{ secrets.JENKINS_URL }}
          username: ${{ secrets.JENKINS_USERNAME }}
          token: ${{ secrets.JENKINS_TOKEN }}
          job: "Regression_V3"
          parameters: |
              Test_Plan=QA-5282
              Private_SB=github.ref_name
              AWS_EC2_OS=aks_latest
              AWS_APP_OS=aks_latest
              Config_File=aks_fast_regression_default.json
              Manifest_Branch=master
              pipeline_automation_branch=master
              is_ms_mode=True
              AWS_EC2_VNL=True
              AWS_APP_VNL=True